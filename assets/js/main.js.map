{"mappings":"AACO,SAASA,EAAGC,EAAOC,EAAUC,EAAUC,UAC1C,OAAOD,EAAQE,iBAAiBJ,EAAOC,E,CAEpC,SAASI,EAAIL,EAAOC,EAAUC,EAAUC,UAC3C,OAAOD,EAAQI,oBAAoBN,EAAOC,E,CAEvC,SAASM,EAAOC,EAAUN,EAAUC,SAAUM,GAAM,GACvD,OAAQA,EAAMP,EAAQQ,iBAAiBF,GAAYN,EAAQS,cAAcH,E,CAuBtE,SAASI,EAAcV,EAASW,EAAQC,EAAW,aACtD,IAAIC,EAAW,mBACf,OAAQD,GACJ,IAAK,cAML,IAAK,cACDC,EAAW,yBACX,MALJ,IAAK,aACDA,EAAW,oBASnB,OADAF,EAAOG,mBAAmBF,EAAUZ,GAC7BW,EAAOE,E,CAEX,SAASE,EAAQC,GACpBC,QAAQC,IAAI,UAAWF,GACvB,MAAMG,EAAiBC,OAAOC,OAAOC,IAAI,uBAAuBH,eAChEA,EAAeI,UAAY,GAC3B,MAAMC,EAAUd,EAAc,QAAQM,UAAcG,GAEpDlB,SAASwB,KAAKC,YAAYP,GAERK,EAAQG,QACtB,CACI,CAAEC,QAAS,EAAGC,UAAW,oBACzB,CAAED,QAAS,EAAGC,UAAW,gBAAiBC,OAAQ,IAClD,CAAEF,QAAS,EAAGC,UAAW,gBAAiBC,OAAQ,IAClD,CAAEF,QAAS,EAAGC,UAAW,qBAE7B,CACIE,SAAU,IACVC,OAAQ,OACRC,KAAM,aAKJC,SAAW,IAAMf,EAAegB,Q,CCrE/B,SAAAC,EAAkBC,EAAQrC,GACrC,MAAMsC,EAAO,CACTtC,QAASA,EACTqC,OAAQA,EACRE,QAAQ,EACRC,SAAU,KACVC,YAAY,EACZC,SAAU,GACVC,YACQL,EAAKC,OACLD,EAAKM,QAELN,EAAKO,M,EAGbA,OACIzB,OAAOC,OAAOC,IAAI,uBAAuBwB,iBACzCR,EAAKtC,QAAQ+C,UAAUC,IAAI,QAC3BV,EAAKC,QAAS,EACdD,EAAKW,a,EAETL,QACIN,EAAKtC,QAAQ+C,UAAUZ,OAAO,QAC9BG,EAAKC,QAAS,C,EAElBW,cAAcC,GACVb,EAAKI,SAAW,GAChB,IAAIU,EAAiBD,EAUrB,OATA/B,OAAOC,OAAOC,IAAI,uBAAuB+B,KAAKC,MAAMC,SAAQC,IACpDL,EAAOM,SAAS,IAAID,EAAKE,kBACzBN,EAAiBA,EAAeO,QAAQ,IAAIH,EAAKE,eAAgB,UAAUF,EAAKE,wBAE3EpB,EAAKI,SAASkB,QAAQJ,EAAKK,YAAc,GAC1CvB,EAAKI,SAASoB,KAAKN,EAAKK,Y,IAI7BT,C,EAEXH,cACI,IAAKX,EAAKC,OAAQ,OAClB,MAAMwB,EAAQzB,EAAKD,OAAOrC,QAAQgE,wBAC5BC,EAAWF,EAAMG,EAAI,IAAM,EAAI,EAC/BC,EAAYC,WAAeL,EAAMM,MAAS,IAAO,EAAI,EACrDC,EAAaC,YAAgBR,EAAMS,OAAU,IAAO,EAAI,EAC9D,IAAIC,EAAY,GAEhB,GAAIH,GAAcH,GAAaF,EAC3B,OAAQK,EAAaL,EAAWE,GAC5B,KAAK,EACL,KAAK,EACDM,EAAY,eAAeV,EAAMG,OACjC,MACJ,KAAK,EACDO,EAAY,eAAe,KAAOL,WAAaL,EAAMM,YACrD,MACJ,KAAK,EACDI,EAAY,8CACZ,MACJ,KAAK,EACDA,EAAY,cAAcV,EAAMG,+BAChC,MACJ,KAAK,EACDO,EAAY,cAAc,KAAOL,WAAaL,EAAMM,oCACpD,MACJ,KAAK,EACDI,EAAY,uCAKxBnC,EAAKtC,QAAQ0E,MAAMC,IAAM,GAAGZ,EAAMS,WAClClC,EAAKtC,QAAQ0E,MAAME,KAAO,GAAGb,EAAMG,MACnC5B,EAAKtC,QAAQ0E,MAAM7C,UAAY4C,EAI3BnC,EAAKtC,QAAQ0E,MAAMG,UAHlBP,EAG8B,GAFGC,YAAcR,EAAMS,OAAvB,I,EAKvCM,QAAQC,GACJ,GAAKA,EAAEC,OAAOC,QAAQC,SAAU5C,EAAKG,WAArC,CAEA,GADAH,EAAK6C,SAAQ,GACmB,WAA5BJ,EAAEC,OAAOC,QAAQC,OAGjB,OAFA5C,EAAKM,aACLN,EAAK6C,SAAQ,GAGe,YAA5BJ,EAAEC,OAAOC,QAAQC,OAIW,YAA5BH,EAAEC,OAAOC,QAAQC,OAIW,SAA5BH,EAAEC,OAAOC,QAAQC,OAIW,WAA5BH,EAAEC,OAAOC,QAAQC,QACjB5C,EAAK8C,SAJL9C,EAAK+C,OAJL/C,EAAKgD,UAJLhD,EAAKiD,SARwC,C,EAwBrDA,UACIjD,EAAK6C,SAAQ,GACb,MAAM9B,EAAO,IAAImC,SACjBnC,EAAKoC,OAAO,OAAQ,WACpBpC,EAAKoC,OAAO,KAAMnD,EAAKD,OAAOqD,IAC9BtE,OAAOC,OAAOC,IAAI,uBAAuBqE,KAAKtC,GACzCuC,MAAKC,IAAS,GAAIA,EAAIC,GAAI,OAAOD,EAAIE,MAAM,IAC3CH,MAAKG,IACFzD,EAAKD,OAAOrC,QAAQ+C,UAAUC,IAAI,YAClCV,EAAKtC,QAAQ+C,UAAUC,IAAI,YAC3BjC,EAAQ,SAASuB,EAAKD,OAAOqD,yCAC7BpD,EAAK6C,SAAQ,EAAM,IACpBa,OAAMC,IACLlF,EAAQ,iDACRuB,EAAK6C,SAAQ,EAAM,G,EAI/BG,UACIhD,EAAK6C,SAAQ,GACb,MAAM9B,EAAO,IAAImC,SACXE,EAAKpD,EAAKD,OAAOqD,GACvBrC,EAAKoC,OAAO,OAAQ,WACpBpC,EAAKoC,OAAO,KAAMC,GAClBrC,EAAKoC,OAAO,SAAU,YACtBrE,OAAOC,OAAOC,IAAI,uBAAuBqE,KAAKtC,GACzCuC,MAAKC,IAAS,GAAIA,EAAIC,GAAI,OAAOD,EAAIE,MAAM,IAC3CH,MAAKG,IACFzD,EAAKD,OAAOrC,QAAQ+C,UAAUZ,OAAO,YACrCG,EAAKtC,QAAQ+C,UAAUZ,OAAO,YAC9BG,EAAK6C,SAAQ,GACbpE,EAAQ,SAAS2E,qCAAsC,IACxDM,OAAMC,IAAS3D,EAAK6C,SAAQ,EAAM,G,EAG7CE,OACI,IAAK/C,EAAKE,SAAS0D,MAAMC,OAGrB,OAFA7D,EAAKE,SAAS0D,MAAQ,QACtB5D,EAAK6C,SAAQ,GAGjB7C,EAAK6C,SAAQ,GACb,MAAM9B,EAAO,IAAImC,SACXY,EAAU9D,EAAKY,cAAcZ,EAAKE,SAAS0D,OAE7C5D,EAAKI,SAAS2D,QACdhD,EAAKoC,OAAO,WAAYnD,EAAKI,SAAS4D,KAAK,MAE/CjD,EAAKoC,OAAO,OAAQ,QACpBpC,EAAKoC,OAAO,YAAanD,EAAKD,OAAOqD,IACrCrC,EAAKoC,OAAO,UAAWW,EAAQD,QAC/B9C,EAAKoC,OAAO,UAAWrE,OAAOC,OAAOC,IAAI,uBAAuB+B,KAAKkD,SACrElD,EAAKoC,OAAO,OAAQrE,OAAOC,OAAOC,IAAI,uBAAuB+B,KAAKmD,MAClEnD,EAAKoC,OAAO,QAASrE,OAAOC,OAAOC,IAAI,uBAAuB+B,KAAKoD,OACnErF,OAAOC,OAAOC,IAAI,uBAAuBqE,KAAKtC,GACzCuC,MAAKC,IAAS,GAAIA,EAAIC,GAAI,OAAOD,EAAIE,MAAM,IAC3CH,MAAKc,IACF,GAAIA,EAAIC,QAAS,CACArE,EAAKtC,QAAQS,cAAc,8BACnCK,mBAAmB,YAAa4F,EAAIE,MACzCtE,EAAKE,SAAS0D,MAAQ,GACtBnF,EAAQ,8B,CAEZuB,EAAK6C,SAAQ,EAAM,IACpBa,OAAMC,IACLlF,EAAQ,iDACRuB,EAAK6C,SAAQ,EAAM,G,EAG/BC,SACI9C,EAAK6C,SAAQ,GACb,MAAM9B,EAAO,IAAImC,SACXE,EAAKpD,EAAKD,OAAOqD,GACvBrC,EAAKoC,OAAO,OAAQ,SACpBpC,EAAKoC,OAAO,KAAMC,GAClBtE,OAAOC,OAAOC,IAAI,uBAAuBqE,KAAKtC,GACzCuC,MAAKC,IAAS,GAAIA,EAAIC,GAAI,OAAOD,EAAIE,MAAM,IAC3CH,MAAKc,IACEA,EAAIG,SACJzF,OAAOC,OAAOC,IAAI,uBAAuB8D,OAAO9C,EAAKD,QACrDtB,EAAQ,SAAS2E,+BAEjB3E,EAAQ,iDACRuB,EAAK6C,SAAQ,G,IAElBa,OAAMC,IACLlF,EAAQ,iDACRuB,EAAK6C,SAAQ,EAAM,G,EAG/BA,QAAQ2B,EAAO,MACX,GAAa,OAATA,EACA,OAAOxE,EAAKG,WAEZqE,IACAxE,EAAKtC,QAAQ+C,UAAUC,IAAI,WAC3BV,EAAKG,YAAa,GAEjBqE,IACDxE,EAAKtC,QAAQ+C,UAAUZ,OAAO,WAC9BG,EAAKG,YAAa,E,EAG1BsE,OACIzE,EAAKE,SAAWF,EAAKtC,QAAQS,cAAc,YAC3CR,SAASwB,KAAKC,YAAYY,EAAKtC,SAC/BH,EAAG,QAASyC,EAAKwC,QAASxC,EAAKtC,Q,GAOvC,OAFAsC,EAAKyE,OAEEzE,C,CC1NI,SAAA0E,EAAiBhH,GAC5B,MAAMsC,EAAO,CACTtC,QAASA,EACT0F,GAAI1F,EAAQ0F,GAAGuB,MAAM,KAAK,GAC1B5D,KAAM6D,KAAKC,MAAMnH,EAAQiF,QAAQmC,QACjCC,eAAgB,KAChBC,mBAAmB,EACnBC,SAAU,KACV3G,SAAU,CACNsD,EAAE,EACFsD,EAAE,GAENC,cAAa,KACTnF,EAAKgF,kBAAoB,CAAC,WAAW,WAAW,SAAS7D,SAASiE,iBAAiBpF,EAAK+E,gBAAgBzG,UACjG0B,EAAKgF,mBAEhBK,iBACIrF,EAAKtC,QAAQ0E,MAAM9D,SAAW,WAC9B0B,EAAKtC,QAAQ0E,MAAMC,IAASrC,EAAM1B,SAAS4G,EAAElF,EAAK+E,eAAeO,aAAc,IAAtD,IACzBtF,EAAKtC,QAAQ0E,MAAME,KAAUtC,EAAM1B,SAASsD,EAAE5B,EAAK+E,eAAeQ,YAAa,IAArD,IAC1BvF,EAAKtC,QAAQ0E,MAAM7C,UAAY,wB,EAEnCiG,iBACI,MAAM/D,EAAQzB,EAAK+E,eAAerD,wBAClC1B,EAAKtC,QAAQ0E,MAAM7C,UAAY,eAAeS,EAAK1B,SAASsD,EAAIH,EAAMG,OAAO5B,EAAK1B,SAAS4G,EAAEzD,EAAMyD,Q,EAEvGvE,cACOX,EAAKgF,mBACRhF,EAAKwF,gB,EAETnF,UAAUoC,GACNzC,EAAKiF,SAAS5E,UAAUL,EAAKiF,S,EAEjCR,OACI,IACIzE,EAAK+E,eAAiBhH,EAAOiC,EAAKe,KAAK0E,GACrC,CAAL,MAAK,CAeN,OAdIzF,EAAK+E,iBACL/E,EAAK+E,eAAiBhH,EAAO,oBAEjCiC,EAAK1B,SAAW0B,EAAKe,KAAK2E,IACvB1F,EAAKmF,iBACJnF,EAAKqF,iBACLrF,EAAK+E,eAAe3F,YAAYY,EAAKtC,WAErCsC,EAAKtC,QAAQ0E,MAAM9D,SAAW,QAC9B0B,EAAKwF,iBACL7H,SAASwB,KAAKC,YAAYY,EAAKtC,UAEnCsC,EAAKiF,SAAWnF,EAASE,EAAMjC,EAAO,iBAAiBiC,EAAKoD,OAC5D7F,EAAG,QAASyC,EAAKK,UAAWL,EAAKtC,SAC1BsC,C,GAOf,OAAOA,C,CC1DI,SAAA2F,EAAwB5F,EAAQrC,GAC3C,MAAMsC,EAAO,CACTtC,QAASA,EACTqC,OAAQA,EACRE,QAAQ,EACRC,SAAU,KACVC,YAAY,EACZC,SAAU,GACVC,UAAW,KACHL,EAAKC,OACLD,EAAKM,QAELN,EAAKO,MAAM,EAGnBA,KAAM,KACFzB,OAAOC,OAAOC,IAAI,uBAAuBwB,iBACzCR,EAAKtC,QAAQ+C,UAAUC,IAAI,QAC3BV,EAAKC,QAAS,EACdD,EAAKW,aAAa,EAEtBL,MAAO,KACHN,EAAKtC,QAAQ+C,UAAUZ,OAAO,QAC9BG,EAAKC,QAAS,CAAK,EAEvBW,cAAcC,GACVb,EAAKI,SAAW,GAChB,IAAIU,EAAiBD,EASrB,OARA/B,OAAOC,OAAOC,IAAI,uBAAuB+B,KAAKC,MAAMC,SAAQC,IACpDL,EAAOM,SAAS,IAAID,EAAKE,kBACzBN,EAAiBA,EAAeO,QAAQ,IAAIH,EAAKE,eAAgB,UAAUF,EAAKE,wBAC3EpB,EAAKI,SAASkB,QAAQJ,EAAKK,YAAc,GAC1CvB,EAAKI,SAASoB,KAAKN,EAAKK,Y,IAI7BT,C,EAEXH,cACI,IAAKX,EAAKC,OAAQ,OAClB,MAAMwB,EAAQzB,EAAKD,OAAOrC,QAAQgE,wBAC5BC,EAAWF,EAAMG,EAAI,IAAM,EAAI,EAC/BC,EAAYC,WAAeL,EAAMM,MAAS,IAAO,EAAI,EACrDC,EAAaC,YAAgBR,EAAMS,OAAU,IAAO,EAAI,EAC9D,IAAIC,EAAY,GAEhB,GAAIH,GAAcH,GAAaF,EAC3B,OAAQK,EAAaL,EAAWE,GAC5B,KAAK,EACL,KAAK,EACDM,EAAY,eAAeV,EAAMG,OACjC,MACJ,KAAK,EACDO,EAAY,eAAe,KAAOL,WAAaL,EAAMM,YACrD,MACJ,KAAK,EACDI,EAAY,8CACZ,MACJ,KAAK,EACDA,EAAY,cAAcV,EAAMG,+BAChC,MACJ,KAAK,EACDO,EAAY,cAAc,KAAOL,WAAaL,EAAMM,oCACpD,MACJ,KAAK,EACDI,EAAY,uCAIxBnC,EAAKtC,QAAQ0E,MAAMC,IAAM,GAAGZ,EAAMS,WAClClC,EAAKtC,QAAQ0E,MAAME,KAAO,GAAGb,EAAMG,MACnC5B,EAAKtC,QAAQ0E,MAAM7C,UAAY4C,EAI3BnC,EAAKtC,QAAQ0E,MAAMG,UAHlBP,EAG8B,GAFGC,YAAcR,EAAMS,OAAvB,I,EAKvC0D,QACI5F,EAAKE,SAAS0D,MAAQ,E,EAE1BpB,QAAUC,IACDA,EAAEC,OAAOC,QAAQC,SAAU5C,EAAKG,aACrCH,EAAK6C,SAAQ,GACmB,WAA5BJ,EAAEC,OAAOC,QAAQC,SACjB5C,EAAK4F,QACL5F,EAAKD,OAAO8F,QACZ7F,EAAK6C,SAAQ,IAEe,WAA5BJ,EAAEC,OAAOC,QAAQC,QACjB5C,EAAK8F,S,EAIbA,OAAQ,KACJ,IAAK9F,EAAKE,SAAS0D,MAAMC,OAGrB,OAFA7D,EAAKE,SAAS0D,MAAQ,QACtB5D,EAAK6C,SAAQ,GAGjB,MAAM9B,EAAO,IAAImC,SACXY,EAAU9D,EAAKY,cAAcZ,EAAKE,SAAS0D,OAC7C5D,EAAKI,SAAS2D,QACdhD,EAAKoC,OAAO,WAAYnD,EAAKI,SAAS4D,KAAK,MAE/CjD,EAAKoC,OAAO,OAAQ,UACpBpC,EAAKoC,OAAO,IAAKnD,EAAKD,OAAOzB,SAASsD,GACtCb,EAAKoC,OAAO,IAAKnD,EAAKD,OAAOzB,SAAS4G,GACtCnE,EAAKoC,OAAO,KAAMnD,EAAKD,OAAOgG,iBAC9BhF,EAAKoC,OAAO,UAAWW,EAAQD,QAC/B9C,EAAKoC,OAAO,UAAWrE,OAAOC,OAAOC,IAAI,uBAAuB+B,KAAKkD,SACrElD,EAAKoC,OAAO,OAAQrE,OAAOC,OAAOC,IAAI,uBAAuB+B,KAAKmD,MAClEnD,EAAKoC,OAAO,QAASrE,OAAOC,OAAOC,IAAI,uBAAuB+B,KAAKoD,OACnErF,OAAOC,OAAOC,IAAI,uBAAuBqE,KAAKtC,GACzCuC,MAAKC,IAAS,GAAIA,EAAIC,GAAI,OAAOD,EAAIE,MAAM,IAC3CH,MAAKc,IACEA,EAAIC,UACJrE,EAAK4F,QACL5F,EAAKD,OAAO8F,QACZ/G,OAAOC,OAAOC,IAAI,uBAAuBgH,WAAW5B,EAAIE,MACxD7F,EAAQ,+BAEZuB,EAAK6C,SAAQ,EAAM,IACpBa,OAAMC,IACLlF,EAAQ,iDACRuB,EAAK6C,SAAQ,EAAM,GACrB,EAGVA,QAAQ2B,EAAO,MACX,GAAa,OAATA,EACA,OAAOxE,EAAKG,WAEZqE,IACAxE,EAAKtC,QAAQ+C,UAAUC,IAAI,WAC3BV,EAAKG,YAAa,GAEjBqE,IACDxE,EAAKtC,QAAQ+C,UAAUZ,OAAO,WAC9BG,EAAKG,YAAa,E,EAG1BsE,OACIzE,EAAKE,SAAWF,EAAKtC,QAAQS,cAAc,YAC3CR,SAASwB,KAAKC,YAAYY,EAAKtC,SAC/BH,EAAG,QAASyC,EAAKwC,QAASxC,EAAKtC,Q,GAOvC,OAFAsC,EAAKyE,OAEEzE,C,CCxJI,SAAAiG,EAAuBvI,GAClC,MAAMsC,EAAO,CACTtC,QAASA,EACTqH,eAAgB,KAChBC,mBAAmB,EACnBC,SAAU,KACVhF,QAAQ,EACR3B,SAAU,CACNsD,EAAE,EACFsD,EAAE,GAENa,cAAa,IACN/F,EAAK+E,eAAe3B,GACZ,IAAMpD,EAAK+E,eAAe3B,GAElCpD,EAAK+E,eAAetE,UACZ,IAAMyF,MAAMC,KAAKnG,EAAK+E,eAAetE,WAAWuD,KAAK,KAEzD,kBAEXoC,UAAWrB,EAAezG,GACtB0B,EAAK1B,SAAWA,EAChB0B,EAAK+E,eAAiBA,EACtB/E,EAAKC,QAAS,EACdD,EAAKtC,QAAQ+C,UAAUZ,OAAO,UAC3BG,EAAKmF,gBACJnF,EAAKqF,iBAELrF,EAAKwF,iBAETxF,EAAKK,W,EAETM,cACQX,EAAKC,SACND,EAAKgF,mBACRhF,EAAKwF,iB,EAGTL,cAAa,KACTnF,EAAKgF,kBAAoB,CAAC,WAAW,WAAW,SAAS7D,SAASiE,iBAAiBpF,EAAK+E,gBAAgBzG,UACjG0B,EAAKgF,mBAEhBK,iBACIrF,EAAK+E,eAAe3F,YAAYY,EAAKtC,SACrCsC,EAAKtC,QAAQ0E,MAAM9D,SAAW,WAC9B0B,EAAKtC,QAAQ0E,MAAMC,IAASrC,EAAM1B,SAAS4G,EAAElF,EAAK+E,eAAeO,aAAc,IAAtD,IACzBtF,EAAKtC,QAAQ0E,MAAME,KAAUtC,EAAM1B,SAASsD,EAAE5B,EAAK+E,eAAeQ,YAAa,IAArD,IAC1BvF,EAAKtC,QAAQ0E,MAAM7C,UAAY,wB,EAInCiG,iBACI,MAAM/D,EAAQzB,EAAK+E,eAAerD,wBAClC1B,EAAKtC,QAAQ0E,MAAM7C,UAAY,eAAeS,EAAK1B,SAASsD,EAAIH,EAAMG,OAAO5B,EAAK1B,SAAS4G,EAAEzD,EAAMyD,Q,EAEvG7E,YACIL,EAAKiF,SAAS5E,W,EAElBgG,SAAS3I,GACLsC,EAAKtC,QAAQ+C,UAAUC,IAAI,UAC3BhD,EAAQ0B,YAAYY,EAAKtC,Q,EAE7BmI,QACI7F,EAAK+E,eAAiB,KACtB/E,EAAKC,QAAS,EACdD,EAAKiF,SAAS3E,QACdN,EAAKtC,QAAQ0E,MAAQ,GACrBpC,EAAKtC,QAAQmC,Q,EAEjB4E,KAAI,KACAzE,EAAKiF,SAAWU,EAAe3F,EAAMjC,EAAO,oBAC5CR,EAAG,QAASyC,EAAKK,UAAWL,EAAKtC,SAC1BsC,IAMf,OAAOA,C,CC/EI,SAAAsG,EAAcC,GACzB,MAAMvG,EAAO,CACTuG,cAAeA,EACf7I,QAASK,EAAO,2BAChByI,WAAY,KACZC,aAAc,KACdC,qBAAsB,CAClBC,gBAAgB,EAChBC,cAAc,GAElBC,KAAKpE,GAIDzC,EAAKtC,QAAQ0E,MAAM7C,UAAY,eAAekD,EAAEqE,aAAarE,EAAEsE,c,EAKnEC,SAASvE,GACL5E,EAAI,YAAamC,EAAK6G,MACtBhJ,EAAI,UAAWmC,EAAKgH,UACpBnJ,EAAI,aAAcmC,EAAKgH,SAAUhH,EAAKtC,SACvB,eAAX+E,EAAEwE,OACFjH,EAAKtC,QAAQ0E,MAAM7C,UAAY,G,EAGvCiD,QAAQC,GACJ,IAAKA,EAAEC,OAAOC,QAAQC,OAAU,OAChC,MAAMA,EAASH,EAAEC,OAAOC,QAAQC,OACjB,WAAXA,GACA5C,EAAKtC,QAAQ+C,UAAUyG,OAAO,QAEnB,QAAXtE,GACA9D,OAAOC,OAAOC,IAAI,uBAAuBmI,cAAc1E,E,EAI/D2E,MAAM3E,GACkB,mBAAhBA,EAAEC,OAAOU,KACLX,EAAEC,OAAO2E,SACTrH,EAAK0G,qBAAqBC,gBAAiB,EAC3ChJ,SAASwB,KAAKsB,UAAUZ,OAAO,mBAE/BG,EAAK0G,qBAAqBC,gBAAiB,EAC3ChJ,SAASwB,KAAKsB,UAAUC,IAAI,mBAGhB,iBAAhB+B,EAAEC,OAAOU,KACLX,EAAEC,OAAO2E,SACTrH,EAAK0G,qBAAqBE,cAAe,EACzCjJ,SAASwB,KAAKsB,UAAUZ,OAAO,iBAE/BG,EAAK0G,qBAAqBE,cAAe,EACzCjJ,SAASwB,KAAKsB,UAAUC,IAAI,iBAGpCV,EAAKsH,sB,EAETA,uBACIC,aAAaC,QAAQ,uBAAwB5C,KAAK6C,UAAUzH,EAAK0G,sB,EAErEgB,uBACI,MAAMC,EAA6BJ,aAAaK,QAAQ,wBACpDD,IACA3H,EAAK0G,qBAAuB9B,KAAKC,MAAM8C,G,EAG/CE,uBACQ7H,EAAK0G,qBAAqBC,gBAC1BhJ,SAASwB,KAAKsB,UAAUZ,OAAO,iBAC/B9B,EAAO,kBAAmBiC,EAAKtC,SAAS2J,SAAU,IAElD1J,SAASwB,KAAKsB,UAAUC,IAAI,iBAC5B3C,EAAO,kBAAmBiC,EAAKtC,SAAS2J,SAAU,GAElDrH,EAAK0G,qBAAqBE,cAC1BjJ,SAASwB,KAAKsB,UAAUZ,OAAO,eAC/B9B,EAAO,gBAAiBiC,EAAKtC,SAAS2J,SAAU,IAEhD1J,SAASwB,KAAKsB,UAAUC,IAAI,eAC5B3C,EAAO,gBAAiBiC,EAAKtC,SAAS2J,SAAU,E,EAGxD5C,OAEIzE,EAAKwG,WAAazI,EAAO,4BAEzBiC,EAAK8H,UAAY/J,EAAO,8BAExBiC,EAAK0H,uBACL1H,EAAK6H,uBAELtK,EAAG,aAAa,KACZA,EAAG,YAAayC,EAAK6G,MACrBtJ,EAAG,UAAWyC,EAAKgH,UACnBzJ,EAAG,aAAcyC,EAAKgH,SAAUhH,EAAKtC,QAAQ,GAC9CsC,EAAKwG,YAERjJ,EAAG,QAASyC,EAAKwC,QAASxC,EAAKtC,SAC/BH,EAAG,QAASyC,EAAKoH,MAAOpH,EAAKtC,Q,GAGrC,OAAOsC,C,CCpGI,SAAA+H,EAAyBC,EAAQC,GAC5C,MAAMjI,EAAO,CACTgI,OAAQjK,EAAO,8BACfwI,cAAexI,EAAO,mBACtBmK,mBAAoBnK,EAAO,0BAE3BgD,KAAM6D,KAAKC,MAAM9G,EAAO,2BAA2BoK,aACnDC,MAAO,GACPC,KAAM,KACNC,gBAAgB,EAChBpH,KAAM,GACNqH,cAAc,EACdC,aAAc,KACdC,QAAS,EACTC,YAAa,KACbC,YAAa,KACbC,MAAO,KACPC,UAAWlL,SAASmL,cAAc,MAClCjK,eAAgB,KAChBsI,cAAc1E,IACVA,EAAEsG,iBACE/I,EAAKuI,aACLvI,EAAKgJ,aAELhJ,EAAKiJ,cAEFjJ,GAGXiJ,cACIjJ,EAAKQ,iBACLR,EAAKwI,aAAa3C,QAClB7F,EAAKwI,aAAanC,SAASrG,EAAKuG,eAChChJ,EAAG,YAAayC,EAAKkJ,aAAclJ,EAAKuG,eACxCvG,EAAKuI,cAAe,EACpB5K,SAASwB,KAAKsB,UAAUC,IAAI,iBAC5BnD,EAAG,QAASyC,EAAKmJ,cAAenJ,EAAKuG,c,EAEzCyC,aACInL,EAAI,YAAamC,EAAKkJ,aAAclJ,EAAKuG,eACzCvG,EAAKwI,aAAa9K,QAAQmC,SAC1BG,EAAKuI,cAAe,EACpB5K,SAASwB,KAAKsB,UAAUZ,OAAO,iBAC/BhC,EAAI,QAASmC,EAAKmJ,cAAenJ,EAAKuG,eAClCvG,EAAKsI,iBAAgBtI,EAAKsI,eAAelG,MAAMgH,QAAU,G,EAGjEF,aAAazG,GACT,IAAI4G,EAAS5G,EAAEC,OAAO4G,QAAQ,iBAAmB7G,EAAEC,OAASD,EAAEC,OAAO6G,QAAQ,kEACzEF,EACIA,IAAWrJ,EAAKsI,iBACZtI,EAAKsI,iBACLtI,EAAKsI,eAAelG,MAAMgH,QAAU,IAExCpJ,EAAKsI,eAAiBe,EACtBrJ,EAAKsI,eAAelG,MAAMgH,QAAU,kBAGpCpJ,EAAKsI,iBACLtI,EAAKsI,eAAelG,MAAMgH,QAAU,GACpCpJ,EAAKsI,gBAAiB,GAI9BtI,EAAKwI,aAAa9K,QAAQ0E,MAAM7C,UAAY,eAAekD,EAAEqE,aAAarE,EAAEsE,c,EAEhFoC,cAAc1G,GACVA,EAAEsG,iBACFlL,EAAI,YAAamC,EAAKkJ,aAAclJ,EAAKuG,eACzC1I,EAAI,QAASmC,EAAKmJ,cAAenJ,EAAKuG,eACtC,MAAM9E,EAAQzB,EAAKsI,eAAe5G,wBAC5BpD,EAAW,CACbsD,EAAGa,EAAEb,EAAIH,EAAMG,EACfsD,EAAGzC,EAAEyC,EAAIzD,EAAMyD,GAEnBlF,EAAKwI,aAAapC,UAAUpG,EAAKsI,eAAgBhK,GACjD0B,EAAKuI,cAAe,EACpB5K,SAASwB,KAAKsB,UAAUZ,OAAO,iBAC3BG,EAAKsI,iBAAgBtI,EAAKsI,eAAelG,MAAMgH,QAAU,G,EAEjEpD,WAAWwD,GACP,MACMC,EAAU/E,EADHtG,EAAcoL,EAAMxJ,EAAKkI,mBAAoB,eAC7BzD,OAC7BzE,EAAKoI,MAAM5G,KAAKiI,GAChBA,EAAQpJ,W,EAEZqJ,aAAajH,GACT,GAAIA,EAAEC,OAAO4G,QAAQ,yBAA0B,CAC3C,MAAMlC,EAAQpH,EAAK2I,YAAclG,EAAEC,OAC7BiH,EAAcvC,EAAMxD,MAAMgG,UAAU,EAAGxC,EAAMyC,gBAC7CC,EAAQH,EAAYG,MAAK,0BAC/B,GAAIA,EAIA,GAHA9J,EAAK2J,YAAcA,EACnB3J,EAAK0I,YAAcoB,EACnB1C,EAAM2C,cAAc3K,YAAYY,EAAK6I,WACjCiB,EAAME,OAAOtL,KAAM,CACnB,MAAMuL,EAAejK,EAAKe,KAAKC,MAAMkJ,QAAOhJ,GAAQA,EAAKE,aAAa+I,cAAchJ,SAAS2I,EAAME,OAAOtL,KAAKyL,iBAC/GnK,EAAK6I,UAAU5J,UAAYe,EAAKoK,eAAeH,E,MAE/CjK,EAAK6I,UAAU5J,UAAYe,EAAKoK,eAAepK,EAAKe,KAAKC,YAG7DhB,EAAK6I,UAAUhJ,Q,GAI3BW,iBACIR,EAAKoI,MAAMnH,SAAQlB,IACfA,EAAOkF,SAAS3E,OAAO,IAE3BN,EAAKwI,aAAavD,SAAS3E,O,EAE/B+J,WAAW5H,GACP,MAAMvB,EAAOuB,EAAEC,OACT0E,EAAQpH,EAAK2I,YACb2B,EAAQ,IAAIC,OAAO,GAAGvK,EAAK0I,YAAY,MAAO,KAC9C8B,EAAWxK,EAAK2J,YAAYtI,QAAQiJ,EAAO,KAAKpJ,EAAKyB,QAAQ8H,aACnErD,EAAMxD,MAAQwD,EAAMxD,MAAMvC,QAAQrB,EAAK2J,YAAaa,GACpDpD,EAAMsD,QACNtD,EAAMuD,kBAAkBvD,EAAMxD,MAAMG,OAAS,EAAGqD,EAAMxD,MAAMG,OAAS,GACrE/D,EAAK6I,UAAUhJ,Q,EAEnB+K,eACI5K,EAAKoI,MAAMnH,SAAS4J,IAChBA,EAAKlK,cACLkK,EAAK5F,SAAStE,aAAa,IAE/BX,EAAKwI,aAAa7H,cAClBX,EAAKwI,aAAavD,SAAStE,a,EAE/BmK,gBAAgBrI,GACRzC,EAAKyI,SACLsC,aAAa/K,EAAKyI,SAEtBzI,EAAKyI,QAAUuC,YAAW,KACtBhL,EAAK4K,eACL5K,EAAKyI,QAAU,CAAC,GACjB,I,EAEPpF,KAAKtC,IACDA,EAAKoC,OAAO,SAAU,0BACtBpC,EAAKoC,OAAO,uBAAwBnD,EAAKe,KAAKkK,OACvCC,MAAMlL,EAAKe,KAAKoK,QAAS,CAC5BC,OAAQ,OACRjM,KAAM4B,KAGdsK,aAC4BtN,EAAO,mBAAoBiC,EAAKkI,oBAAoB,GAC5DjH,SAAQqK,IACpBtL,EAAKoI,MAAM5G,KAAKkD,EAAO4G,GAAM7G,OAC7B,G,EAGR3B,OAAOyI,GACHA,EAAQtG,SAASvH,QAAQmC,SACzB0L,EAAQ7N,QAAQmC,SAChBG,EAAKoI,MAAMoD,OAAOxL,EAAKoI,MAAM9G,QAAQiK,GAAU,E,EAEnDnB,eAAeqB,GACJnH,KAAOmH,EAAKC,KAAIxK,GACZ,uBAAuBA,EAAKE,iBAAiBF,EAAKE,qBAAqBF,EAAKK,2BACpFyC,KAAK,IAEZS,OAII,GAHIzE,EAAKuI,cACLvI,EAAKgJ,aAELhJ,EAAKqI,KAIL,YAHIrI,EAAKoI,MAAMrE,QACX/D,EAAK4K,gBAIb,IAAK5K,EAAKuG,cAEN,YADA5H,QAAQgN,KAAK,2CAGZ3L,EAAKnB,iBACNmB,EAAKnB,eAAiBlB,SAASmL,cAAc,OAC7C9I,EAAKnB,eAAeuE,GAAK,6BAG7BpD,EAAKqI,KAAO/B,EAAKtG,EAAKuG,eACtBvG,EAAKqI,KAAK5D,OAEVzE,EAAK6I,UAAUzF,GAAK,yBACpBpD,EAAK6I,UAAU5J,UAAYe,EAAKoK,eAAepK,EAAKe,KAAKC,OASjCjD,EAAO,mBAAoBiC,EAAKkI,oBAAoB,GAC5DjH,SAAQqK,IACpBtL,EAAKoI,MAAM5G,KAAKkD,EAAO4G,GAAM7G,OAC7B,IAGJ,MAAMmH,EAAO7N,EAAO,gBAAiBiC,EAAKkI,oBAC1ClI,EAAKwI,aAAevC,EAAa2F,GAAMnH,OAEvClH,EAAG,QAASyC,EAAKqK,WAAYrK,EAAK6I,WAElCtL,EAAG,SAAUyC,EAAK8K,iBAClBvN,EAAG,SAAUyC,EAAK8K,gBAAiBhM,QACnCvB,EAAG,QAASyC,EAAK0J,cACjBnM,EAAG,gBAAiByC,EAAK8K,gBAAiB9K,EAAKuG,c,GAOvD,OAAOvG,C,CCzNXlB,OAAOlB,iBAAiB,QAAQ,WAG5B,MAAMoK,EAASjK,EAAO,8BACnBiK,GACCzK,EAAG,SAAS,WACRI,SAASwB,KAAKsB,UAAUyG,OAAO,qBAC/BpI,OAAOC,OAAOC,IAAI,uBAAuByF,M,GAC3CuD,GAENlJ,OAAOC,OAAOC,IAAI,uBAAyB+I,G","sources":["src/helpers.js","src/dropDown.js","src/marker.js","src/shadowDropDown.js","src/shadowMarker.js","src/menu.js","src/designNotesMain.js","src/index.js"],"sourcesContent":["\r\nexport function on(event, callback, element = document) {\r\n    return element.addEventListener(event, callback);\r\n}\r\nexport function off(event, callback, element = document) {\r\n    return element.removeEventListener(event, callback);\r\n}\r\nexport function select(selector, element = document, all = false) {\r\n    return (all ? element.querySelectorAll(selector) : element.querySelector(selector));\r\n}\r\nexport function createElement(tag, args = {}, content) {\r\n    const e = {\r\n        tag: tag || 'div',\r\n        class: args.class || '',\r\n        content: content || '',\r\n        attributes: '',\r\n    }\r\n    if (args.attributes) {\r\n        let attributes = '';\r\n        args.attributes.forEach(item => {\r\n            attributes += ` ${item.name}=\"${item.value}\"`;\r\n        });\r\n        e.attributes = attributes;\r\n    }\r\n\r\n    if (e.class) {\r\n        e.class = ` class=\"${e.class}\"`;\r\n    }\r\n\r\n    return `<${e.tag}${e.class}${e.attributes}>${e.content}</${e.tag}>`;\r\n}\r\nexport function renderElement(element, parent, position = 'beforeend') {\r\n    let property = 'lastElementChild';\r\n    switch (position) {\r\n        case 'beforebegin':\r\n            property = 'previousElementSibling';\r\n            break;\r\n        case 'afterbegin':\r\n            property = 'firstElementChild';\r\n            break;\r\n        case 'beforebegin':\r\n            property = 'previousElementSibling';\r\n            break;\r\n        default:\r\n            break;\r\n    }\r\n    parent.insertAdjacentHTML(position, element);\r\n    return parent[property];\r\n}\r\nexport function message(text) {\r\n    console.log('message', text);\r\n    const messageElement = window[Symbol.for('diviDesignNotesAPI')].messageElement;\r\n    messageElement.innerHTML = '';\r\n    const message = renderElement(`<div>${text}</div>`, messageElement);\r\n\r\n    document.body.appendChild(messageElement);\r\n    //renderElement(text, messageElement);\r\n    const animation = message.animate(\r\n        [\r\n            { opacity: 0, transform: 'translateX(100%)' },  // start (offscreen)\r\n            { opacity: 1, transform: 'translateX(0)', offset: 0.1 }, // slide in\r\n            { opacity: 1, transform: 'translateX(0)', offset: 0.9 }, // stay visible\r\n            { opacity: 0, transform: 'translateX(100%)' }  // slide out\r\n        ],\r\n        {\r\n            duration: 4000, // total 4 seconds\r\n            easing: 'ease',\r\n            fill: 'forwards'\r\n        }\r\n    );\r\n\r\n    // Remove element after animation ends\r\n    animation.onfinish = () => messageElement.remove();\r\n}\r\n\r\n\r\n\r\n\r\n\r\n","import { on, message } from \"./helpers\";\r\n\r\n\r\nexport default function DropDown(marker, element) {\r\n    const self = {\r\n        element: element,\r\n        marker: marker,\r\n        active: false,\r\n        textArea: null,\r\n        is_ajaxing: false,\r\n        mensions: [],\r\n        openClose() {\r\n            if (self.active) {\r\n                self.close()\r\n            } else {\r\n                self.open()\r\n            }\r\n        },\r\n        open() {\r\n            window[Symbol.for('diviDesignNotesAPI')].closeDropdowns();\r\n            self.element.classList.add('open');\r\n            self.active = true;\r\n            self.setPosition()\r\n        },\r\n        close() {\r\n            self.element.classList.remove('open');\r\n            self.active = false;\r\n        },\r\n        checkMensions(string) {\r\n            self.mensions = [];\r\n            let stringMensions = string;\r\n            window[Symbol.for('diviDesignNotesAPI')].data.users.forEach(user => {\r\n                if (string.includes(`@${user.display_name}`)) {\r\n                    stringMensions = stringMensions.replace(`@${user.display_name}`, `<span>@${user.display_name}</span>`);\r\n\r\n                    if (!self.mensions.indexOf(user.user_email) + 1) {\r\n                        self.mensions.push(user.user_email);\r\n                    }\r\n                }\r\n            })\r\n            return stringMensions;\r\n        },\r\n        setPosition() {\r\n            if (!self.active) return;\r\n            const rects = self.marker.element.getBoundingClientRect();\r\n            const fromLeft = rects.x < 175 ? 1 : 0;\r\n            const fromRight = ((innerWidth - rects.right) < 175) ? 3 : 0;\r\n            const fromBottom = ((innerHeight - rects.bottom) < 200) ? 5 : 0;\r\n            let translate = '';\r\n\r\n            if (fromBottom || fromRight || fromLeft) {\r\n                switch (fromBottom + fromLeft + fromRight) {\r\n                    case 1: //Left\r\n                    case 4: //Left & Right\r\n                        translate = `translateX(${-rects.x}px)`\r\n                        break;\r\n                    case 3: //Right\r\n                        translate = `translateX(-${350 - (innerWidth - rects.right)}px)`\r\n                        break;\r\n                    case 5: //Bottom\r\n                        translate = `translate(-50%,-100%) translate(15px,-40px)`\r\n                        break;\r\n                    case 6: //Left & Bottom\r\n                        translate = `translate(${-rects.x}px,-100%) translateY(-40px)`\r\n                        break;\r\n                    case 8: //Right & Bottom\r\n                        translate = `translate(-${350 - (innerWidth - rects.right)}px,-100%) translateY(-40px)`\r\n                        break;\r\n                    case 9: //Left & Right & Bottom\r\n                        translate = `translate(0,-100%) translateY(-40px)`\r\n                        break;\r\n                }\r\n            }\r\n\r\n            self.element.style.top = `${rects.bottom}px`;\r\n            self.element.style.left = `${rects.x}px`;\r\n            self.element.style.transform = translate;\r\n            if (!fromBottom) {\r\n                self.element.style.maxHeight = `${innerHeight - rects.bottom}px`;\r\n            } else {\r\n                self.element.style.maxHeight = '';\r\n            }\r\n        },\r\n        clicked(e) {\r\n            if (!e.target.dataset.action || self.is_ajaxing) return;\r\n            self.ajaxing(true);\r\n            if (e.target.dataset.action === 'cancel') {\r\n                self.close();\r\n                self.ajaxing(false);\r\n                return;\r\n            }\r\n            if (e.target.dataset.action === 'resolve') {\r\n                self.resolve();\r\n                return;\r\n            }\r\n            if (e.target.dataset.action === 'restore') {\r\n                self.restore();\r\n                return;\r\n            }\r\n            if (e.target.dataset.action === 'post') {\r\n                self.post();\r\n                return;\r\n            }\r\n            if (e.target.dataset.action === 'delete') {\r\n                self.delete();\r\n                return;\r\n            }\r\n        },\r\n        resolve() {\r\n            self.ajaxing(true);\r\n            const data = new FormData();\r\n            data.append('type', 'resolve')\r\n            data.append('id', self.marker.id)\r\n            window[Symbol.for('diviDesignNotesAPI')].ajax(data)\r\n                .then(res => { if (res.ok) return res.json() })\r\n                .then(json => {\r\n                    self.marker.element.classList.add('resolved')\r\n                    self.element.classList.add('resolved')\r\n                    message(`Note: ${self.marker.id} has been set to status: \"Resolved\"`);\r\n                    self.ajaxing(false);\r\n                }).catch(err => {\r\n                    message(`Something went wrong try refreshing the page.`);\r\n                    self.ajaxing(false)\r\n                });\r\n\r\n        },\r\n        restore() {\r\n            self.ajaxing(true);\r\n            const data = new FormData();\r\n            const id = self.marker.id;\r\n            data.append('type', 'restore')\r\n            data.append('id', id)\r\n            data.append('status', 'resolved')\r\n            window[Symbol.for('diviDesignNotesAPI')].ajax(data)\r\n                .then(res => { if (res.ok) return res.json() })\r\n                .then(json => {\r\n                    self.marker.element.classList.remove('resolved')\r\n                    self.element.classList.remove('resolved')\r\n                    self.ajaxing(false);\r\n                    message(`Note: ${id} has been set to status: \"Active\"`);\r\n                }).catch(err => { self.ajaxing(false) });\r\n\r\n        },\r\n        post() {\r\n            if (!self.textArea.value.trim()) {\r\n                self.textArea.value = '';\r\n                self.ajaxing(false)\r\n                return;\r\n            }\r\n            self.ajaxing(true);\r\n            const data = new FormData();\r\n            const content = self.checkMensions(self.textArea.value);\r\n\r\n            if (self.mensions.length) {\r\n                data.append('mensions', self.mensions.join(','))\r\n            }\r\n            data.append('type', 'post')\r\n            data.append('parent_id', self.marker.id)\r\n            data.append('content', content.trim())\r\n            data.append('post_id', window[Symbol.for('diviDesignNotesAPI')].data.post_id)\r\n            data.append('href', window[Symbol.for('diviDesignNotesAPI')].data.href)\r\n            data.append('title', window[Symbol.for('diviDesignNotesAPI')].data.title)\r\n            window[Symbol.for('diviDesignNotesAPI')].ajax(data)\r\n                .then(res => { if (res.ok) return res.json() })\r\n                .then(obj => {\r\n                    if (obj.success) {\r\n                        const body = self.element.querySelector('.design_note_dropdown_body')\r\n                        body.insertAdjacentHTML('beforeend', obj.html)\r\n                        self.textArea.value = '';\r\n                        message('Your reply has been posted.');\r\n                    }\r\n                    self.ajaxing(false);\r\n                }).catch(err => {\r\n                    message(`Something went wrong try refreshing the page.`);\r\n                    self.ajaxing(false)\r\n                });\r\n        },\r\n        delete() {\r\n            self.ajaxing(true);\r\n            const data = new FormData();\r\n            const id = self.marker.id;\r\n            data.append('type', 'trash')\r\n            data.append('id', id)\r\n            window[Symbol.for('diviDesignNotesAPI')].ajax(data)\r\n                .then(res => { if (res.ok) return res.json() })\r\n                .then(obj => {\r\n                    if (obj.trashed) {\r\n                        window[Symbol.for('diviDesignNotesAPI')].delete(self.marker);\r\n                        message(`Note: ${id} has been moved to Trash`);\r\n                    } else {\r\n                        message(`Something went wrong try refreshing the page.`);\r\n                        self.ajaxing(false)\r\n                    }\r\n                }).catch(err => {\r\n                    message(`Something went wrong try refreshing the page.`);\r\n                    self.ajaxing(false)\r\n                });\r\n        },\r\n        ajaxing(flag = null) {\r\n            if (flag === null) {\r\n                return self.is_ajaxing;\r\n            }\r\n            if (flag) {\r\n                self.element.classList.add('ajaxing');\r\n                self.is_ajaxing = true;\r\n            }\r\n            if (!flag) {\r\n                self.element.classList.remove('ajaxing');\r\n                self.is_ajaxing = false;\r\n            }\r\n        },\r\n        init() {\r\n            self.textArea = self.element.querySelector('textarea');\r\n            document.body.appendChild(self.element);\r\n            on('click', self.clicked, self.element);\r\n        }\r\n\r\n\r\n    };\r\n    self.init();\r\n\r\n    return self;\r\n\r\n\r\n}","import DropDown from \"./dropDown\";\r\nimport { on, select } from \"./helpers\";\r\n\r\nexport default function Marker( element ){\r\n    const self = {\r\n        element: element,\r\n        id: element.id.split('-')[1],\r\n        data: JSON.parse(element.dataset.params),\r\n        relatedElement: null,\r\n        relativeToElement: false,\r\n        dropDown: null,\r\n        position: {\r\n            x:0,\r\n            y:0\r\n        },\r\n        getRelativity () {\r\n            self.relativeToElement = ['relative','absolute','fixed'].includes(getComputedStyle(self.relatedElement).position);\r\n            return self.relativeToElement;\r\n        },\r\n        setRelPosition(){\r\n            self.element.style.position = 'absolute';\r\n            self.element.style.top = `${(self.position.y/self.relatedElement.offsetHeight)*100}%`;\r\n            self.element.style.left = `${(self.position.x/self.relatedElement.offsetWidth)*100}%`;\r\n            self.element.style.transform = `translate(-20px,-40px)`;\r\n        },\r\n        setFixPosition(){\r\n            const rects = self.relatedElement.getBoundingClientRect();\r\n            self.element.style.transform = `translate3d(${self.position.x + rects.x}px,${self.position.y+rects.y}px,0)`;\r\n        },\r\n        setPosition(){\r\n            if(self.relativeToElement) return;\r\n            self.setFixPosition();\r\n        },\r\n        openClose(e){\r\n            self.dropDown.openClose(self.dropDown)\r\n        },\r\n        init() {\r\n            try{\r\n                self.relatedElement = select(self.data.el);  \r\n            }catch{}\r\n            if(!self.relatedElement){\r\n                self.relatedElement = select('#page-container');\r\n            }\r\n            self.position = self.data.pos;\r\n            if(self.getRelativity()){\r\n                self.setRelPosition();\r\n                self.relatedElement.appendChild(self.element)\r\n            }else{\r\n                self.element.style.position = 'fixed';\r\n                self.setFixPosition();\r\n                document.body.appendChild(self.element)\r\n            }\r\n            self.dropDown = DropDown(self, select(`#notedropdown-${self.id}`));\r\n            on('click', self.openClose, self.element );\r\n            return self;\r\n\r\n        },\r\n\r\n\r\n    };\r\n    \r\n    return self;\r\n}","import { message, on } from \"./helpers\";\r\n\r\n\r\nexport default function shadowDropDown(marker, element) {\r\n    const self = {\r\n        element: element,\r\n        marker: marker,\r\n        active: false,\r\n        textArea: null,\r\n        is_ajaxing: false,\r\n        mensions: [],\r\n        openClose: () => {\r\n            if (self.active) {\r\n                self.close()\r\n            } else {\r\n                self.open()\r\n            }\r\n        },\r\n        open: () => {\r\n            window[Symbol.for('diviDesignNotesAPI')].closeDropdowns();\r\n            self.element.classList.add('open');\r\n            self.active = true;\r\n            self.setPosition()\r\n        },\r\n        close: () => {\r\n            self.element.classList.remove('open');\r\n            self.active = false;\r\n        },\r\n        checkMensions(string) {\r\n            self.mensions = [];\r\n            let stringMensions = string;\r\n            window[Symbol.for('diviDesignNotesAPI')].data.users.forEach(user => {\r\n                if (string.includes(`@${user.display_name}`)) {\r\n                    stringMensions = stringMensions.replace(`@${user.display_name}`, `<span>@${user.display_name}</span>`);\r\n                    if (!self.mensions.indexOf(user.user_email) + 1) {\r\n                        self.mensions.push(user.user_email);\r\n                    }\r\n                }\r\n            })\r\n            return stringMensions;\r\n        },\r\n        setPosition() {\r\n            if (!self.active) return;\r\n            const rects = self.marker.element.getBoundingClientRect();\r\n            const fromLeft = rects.x < 175 ? 1 : 0;\r\n            const fromRight = ((innerWidth - rects.right) < 175) ? 3 : 0;\r\n            const fromBottom = ((innerHeight - rects.bottom) < 200) ? 5 : 0;\r\n            let translate = '';\r\n\r\n            if (fromBottom || fromRight || fromLeft) {\r\n                switch (fromBottom + fromLeft + fromRight) {\r\n                    case 1: //Left\r\n                    case 4: //Left & Right\r\n                        translate = `translateX(${-rects.x}px)`\r\n                        break;\r\n                    case 3: //Right\r\n                        translate = `translateX(-${350 - (innerWidth - rects.right)}px)`\r\n                        break;\r\n                    case 5: //Bottom\r\n                        translate = `translate(-50%,-100%) translate(15px,-40px)`\r\n                        break;\r\n                    case 6: //Left & Bottom\r\n                        translate = `translate(${-rects.x}px,-100%) translateY(-40px)`\r\n                        break;\r\n                    case 8: //Right & Bottom\r\n                        translate = `translate(-${350 - (innerWidth - rects.right)}px,-100%) translateY(-40px)`\r\n                        break;\r\n                    case 9: //Left & Right & Bottom\r\n                        translate = `translate(0,-100%) translateY(-40px)`\r\n                        break;\r\n                }\r\n            }\r\n            self.element.style.top = `${rects.bottom}px`;\r\n            self.element.style.left = `${rects.x}px`;\r\n            self.element.style.transform = translate;\r\n            if (!fromBottom) {\r\n                self.element.style.maxHeight = `${innerHeight - rects.bottom}px`;\r\n            } else {\r\n                self.element.style.maxHeight = '';\r\n            }\r\n        },\r\n        clear() {\r\n            self.textArea.value = '';\r\n        },\r\n        clicked: (e) => {\r\n            if (!e.target.dataset.action || self.is_ajaxing) return;\r\n            self.ajaxing(true);\r\n            if (e.target.dataset.action === 'cancel') {\r\n                self.clear();\r\n                self.marker.reset();\r\n                self.ajaxing(false);\r\n            }\r\n            if (e.target.dataset.action === 'create') {\r\n                self.create();\r\n                return;\r\n            }\r\n        },\r\n        create: () => {\r\n            if (!self.textArea.value.trim()) {\r\n                self.textArea.value = '';\r\n                self.ajaxing(false);\r\n                return;\r\n            }\r\n            const data = new FormData();\r\n            const content = self.checkMensions(self.textArea.value);\r\n            if (self.mensions.length) {\r\n                data.append('mensions', self.mensions.join(','))\r\n            }\r\n            data.append('type', 'create')\r\n            data.append('x', self.marker.position.x)\r\n            data.append('y', self.marker.position.y)\r\n            data.append('el', self.marker.getElSelector())\r\n            data.append('content', content.trim())\r\n            data.append('post_id', window[Symbol.for('diviDesignNotesAPI')].data.post_id)\r\n            data.append('href', window[Symbol.for('diviDesignNotesAPI')].data.href)\r\n            data.append('title', window[Symbol.for('diviDesignNotesAPI')].data.title)\r\n            window[Symbol.for('diviDesignNotesAPI')].ajax(data)\r\n                .then(res => { if (res.ok) return res.json() })\r\n                .then(obj => {\r\n                    if (obj.success) {\r\n                        self.clear();\r\n                        self.marker.reset();\r\n                        window[Symbol.for('diviDesignNotesAPI')].createNote(obj.html)\r\n                        message('New note has been created.');\r\n                    }\r\n                    self.ajaxing(false);\r\n                }).catch(err => {\r\n                    message(`Something went wrong try refreshing the page.`);\r\n                    self.ajaxing(false)\r\n                });\r\n\r\n        },\r\n        ajaxing(flag = null) {\r\n            if (flag === null) {\r\n                return self.is_ajaxing;\r\n            }\r\n            if (flag) {\r\n                self.element.classList.add('ajaxing');\r\n                self.is_ajaxing = true;\r\n            }\r\n            if (!flag) {\r\n                self.element.classList.remove('ajaxing');\r\n                self.is_ajaxing = false;\r\n            }\r\n        },\r\n        init() {\r\n            self.textArea = self.element.querySelector('textarea');\r\n            document.body.appendChild(self.element);\r\n            on('click', self.clicked, self.element);\r\n        }\r\n\r\n\r\n    };\r\n    self.init();\r\n\r\n    return self;\r\n\r\n}","import shadowDropDown from \"./shadowDropDown\";\r\nimport { on, select } from \"./helpers\";\r\n\r\nexport default function shadowMarker( element ){\r\n    const self = {\r\n        element: element,\r\n        relatedElement: null,\r\n        relativeToElement: false,\r\n        dropDown: null,\r\n        active: false,\r\n        position: {\r\n            x:0,\r\n            y:0\r\n        },\r\n        getElSelector(){\r\n            if(self.relatedElement.id){\r\n                return '#' + self.relatedElement.id;\r\n            }\r\n            if(self.relatedElement.classList){\r\n                return '.' + Array.from(self.relatedElement.classList).join('.');\r\n            }\r\n            return '#page-container';\r\n        },\r\n        pinOnPage( relatedElement,position ) {\r\n            self.position = position;\r\n            self.relatedElement = relatedElement;\r\n            self.active = true;\r\n            self.element.classList.remove('active')\r\n            if(self.getRelativity()){\r\n                self.setRelPosition();\r\n            }else{\r\n                self.setFixPosition();\r\n            }\r\n            self.openClose();\r\n        },\r\n        setPosition(){\r\n            if(!self.active) return;\r\n            if(self.relativeToElement) return;  \r\n            self.setFixPosition();\r\n\r\n        },\r\n        getRelativity(){\r\n            self.relativeToElement = ['relative','absolute','fixed'].includes(getComputedStyle(self.relatedElement).position);\r\n            return self.relativeToElement;\r\n        },\r\n        setRelPosition(){\r\n            self.relatedElement.appendChild(self.element)\r\n            self.element.style.position = 'absolute';\r\n            self.element.style.top = `${(self.position.y/self.relatedElement.offsetHeight)*100}%`;\r\n            self.element.style.left = `${(self.position.x/self.relatedElement.offsetWidth)*100}%`;\r\n            self.element.style.transform = `translate(-20px,-40px)`;\r\n            // self.element.style.position = 'absolute';\r\n            // self.element.style.transform = `translate3d(${self.position.x}px,${self.position.y}px,0)`;\r\n        },\r\n        setFixPosition(){\r\n            const rects = self.relatedElement.getBoundingClientRect();\r\n            self.element.style.transform = `translate3d(${self.position.x + rects.x}px,${self.position.y+rects.y}px,0)`;\r\n        },\r\n        openClose(){\r\n            self.dropDown.openClose()\r\n        },\r\n        activate(element){\r\n            self.element.classList.add('active');\r\n            element.appendChild(self.element)\r\n        },\r\n        reset(){\r\n            self.relatedElement = null;\r\n            self.active = false;\r\n            self.dropDown.close();\r\n            self.element.style = '';\r\n            self.element.remove();\r\n        },\r\n        init(){\r\n            self.dropDown = shadowDropDown(self, select('#shadowdropdown'));\r\n            on('click', self.openClose, self.element);\r\n            return self;\r\n        },\r\n\r\n\r\n    };\r\n    \r\n    return self;\r\n}","import { select, on, off } from \"./helpers\";\r\n\r\nexport default function Menu(pageContainer) {\r\n    const self = {\r\n        pageContainer: pageContainer,\r\n        element: select('#divi_design_notes_menu'),\r\n        moveButton: null,\r\n        toggleButton: null,\r\n        visibleNotesByStatus: {\r\n            resolved_notes: true,\r\n            active_notes: true\r\n        },\r\n        move(e) {\r\n            // const x = self.element.style.left || 100;\r\n            // const y = self.element.style.top || 100;\r\n\r\n            self.element.style.transform = `translate3d(${e.clientX}px,${e.clientY}px,0)`;\r\n\r\n            // self.element.style.left = `${parseInt(x)+e.movementX}px`;\r\n            // self.element.style.top = `${parseInt(y)+e.movementY}px`;\r\n        },\r\n        stopMove(e) {\r\n            off('mousemove', self.move);\r\n            off('mouseup', self.stopMove);\r\n            off('mouseleave', self.stopMove, self.element);\r\n            if (e.type === 'mouseleave') {\r\n                self.element.style.transform = '';\r\n            }\r\n        },\r\n        clicked(e) {\r\n            if (!e.target.dataset.action) { return }\r\n            const action = e.target.dataset.action;\r\n            if (action === 'toggle') {\r\n                self.element.classList.toggle('open')\r\n            }\r\n            if (action === 'new') {\r\n                window[Symbol.for('diviDesignNotesAPI')].buttonClicked(e)\r\n            }\r\n\r\n        },\r\n        input(e) {\r\n            if (e.target.id === 'resolved_notes') {\r\n                if (e.target.checked) {\r\n                    self.visibleNotesByStatus.resolved_notes = true;\r\n                    document.body.classList.remove('hide-resolved');\r\n                } else {\r\n                    self.visibleNotesByStatus.resolved_notes = false;\r\n                    document.body.classList.add('hide-resolved');\r\n                }\r\n            }\r\n            if (e.target.id === 'active_notes') {\r\n                if (e.target.checked) {\r\n                    self.visibleNotesByStatus.active_notes = true;\r\n                    document.body.classList.remove('hide-active');\r\n                } else {\r\n                    self.visibleNotesByStatus.active_notes = false;\r\n                    document.body.classList.add('hide-active');\r\n                }\r\n            }\r\n            self.cacheNotesVisability();\r\n        },\r\n        cacheNotesVisability() {\r\n            localStorage.setItem('visibleNotesByStatus', JSON.stringify(self.visibleNotesByStatus));\r\n        },\r\n        checkNotesVisability() {\r\n            const cachedVisibleNotesByStatus = localStorage.getItem('visibleNotesByStatus');\r\n            if (cachedVisibleNotesByStatus) {\r\n                self.visibleNotesByStatus = JSON.parse(cachedVisibleNotesByStatus);\r\n            }\r\n        },\r\n        initiateVisibleNotes() {\r\n            if (self.visibleNotesByStatus.resolved_notes) {\r\n                document.body.classList.remove('hide-resolved');\r\n                select('#resolved_notes', self.element).checked = true;\r\n            } else {\r\n                document.body.classList.add('hide-resolved');\r\n                select('#resolved_notes', self.element).checked = false;\r\n            }\r\n            if (self.visibleNotesByStatus.active_notes) {\r\n                document.body.classList.remove('hide-active');\r\n                select('#active_notes', self.element).checked = true;\r\n            } else {\r\n                document.body.classList.add('hide-active');\r\n                select('#active_notes', self.element).checked = false;\r\n            }\r\n        },\r\n        init() {\r\n\r\n            self.moveButton = select('span[data-action=\"move\"]');\r\n\r\n            self.addButton = select('span[data-action=\"toggle\"]');\r\n\r\n            self.checkNotesVisability();\r\n            self.initiateVisibleNotes();\r\n\r\n            on('mousedown', () => {\r\n                on('mousemove', self.move);\r\n                on('mouseup', self.stopMove);\r\n                on('mouseleave', self.stopMove, self.element);\r\n            }, self.moveButton);\r\n\r\n            on('click', self.clicked, self.element)\r\n            on('input', self.input, self.element)\r\n        }\r\n    };\r\n    return self;\r\n}","import { select, on, off, renderElement } from './helpers.js';\r\nimport Marker from './marker';\r\nimport shadowMarker from './shadowMarker';\r\nimport Menu from './menu';\r\n\r\nexport default function DesignNotesMain(button, dataElement) {\r\n    const self = {\r\n        button: select('#wp-admin-bar-design_notes'),\r\n        pageContainer: select('#page-container'),\r\n        templatesContainer: select('#design_notes_template'),\r\n\r\n        data: JSON.parse(select('#divi_design_notes_json').textContent),\r\n        notes: [],\r\n        menu: null,\r\n        hoveredElement: false,\r\n        user: '',\r\n        markerActive: false,\r\n        shadowMarker: null,\r\n        timeout: 0,\r\n        currenMatch: null,\r\n        inputTarget: null,\r\n        caret: null,\r\n        usersNode: document.createElement('ul'),\r\n        messageElement: null,\r\n        buttonClicked(e) {\r\n            e.preventDefault();\r\n            if (self.markerActive) {\r\n                self.stopMarker();\r\n            } else {\r\n                self.startMarker();\r\n            }\r\n            return self;\r\n\r\n        },\r\n        startMarker() {\r\n            self.closeDropdowns();\r\n            self.shadowMarker.reset();\r\n            self.shadowMarker.activate(self.pageContainer);\r\n            on('mousemove', self.followMarker, self.pageContainer);\r\n            self.markerActive = true;\r\n            document.body.classList.add('marker-active');\r\n            on('click', self.markerClicked, self.pageContainer);\r\n        },\r\n        stopMarker() {\r\n            off('mousemove', self.followMarker, self.pageContainer);\r\n            self.shadowMarker.element.remove();\r\n            self.markerActive = false;\r\n            document.body.classList.remove('marker-active');\r\n            off('click', self.markerClicked, self.pageContainer);\r\n            if (self.hoveredElement) self.hoveredElement.style.outline = '';\r\n\r\n        },\r\n        followMarker(e) {\r\n            let module = e.target.matches('.et_pb_module') ? e.target : e.target.closest('.et_pb_module,.et_pb_row,.et_pb_section,header,#page-container');\r\n            if (module) {\r\n                if (module !== self.hoveredElement) {\r\n                    if (self.hoveredElement) {\r\n                        self.hoveredElement.style.outline = '';\r\n                    }\r\n                    self.hoveredElement = module;\r\n                    self.hoveredElement.style.outline = '3px solid blue';\r\n                }\r\n            } else {\r\n                if (self.hoveredElement) {\r\n                    self.hoveredElement.style.outline = '';\r\n                    self.hoveredElement = false;\r\n                }\r\n            }\r\n\r\n            self.shadowMarker.element.style.transform = `translate3d(${e.clientX}px,${e.clientY}px,0)`;\r\n        },\r\n        markerClicked(e) {\r\n            e.preventDefault();\r\n            off('mousemove', self.followMarker, self.pageContainer);\r\n            off('click', self.markerClicked, self.pageContainer);\r\n            const rects = self.hoveredElement.getBoundingClientRect();\r\n            const position = {\r\n                x: e.x - rects.x,\r\n                y: e.y - rects.y,\r\n            }\r\n            self.shadowMarker.pinOnPage(self.hoveredElement, position);\r\n            self.markerActive = false;\r\n            document.body.classList.remove('marker-active');\r\n            if (self.hoveredElement) self.hoveredElement.style.outline = '';\r\n        },\r\n        createNote(html) {\r\n            const node = renderElement(html, self.templatesContainer, 'afterbegin');\r\n            const newNote = Marker(node).init()\r\n            self.notes.push(newNote);\r\n            newNote.openClose()\r\n        },\r\n        inputHandler(e) {\r\n            if (e.target.matches('.design_note_textarea')) {\r\n                const input = self.inputTarget = e.target;\r\n                const textToCaret = input.value.substring(0, input.selectionStart);\r\n                const match = textToCaret.match(/@(?<text>[a-z]{0,3})$/i);\r\n                if (match) {\r\n                    self.textToCaret = textToCaret;\r\n                    self.currenMatch = match;\r\n                    input.parentElement.appendChild(self.usersNode);\r\n                    if (match.groups.text) {\r\n                        const usersMatched = self.data.users.filter(user => user.display_name.toLowerCase().includes(match.groups.text.toLowerCase()))\r\n                        self.usersNode.innerHTML = self.usersListItems(usersMatched)\r\n                    } else {\r\n                        self.usersNode.innerHTML = self.usersListItems(self.data.users)\r\n                    }\r\n                } else {\r\n                    self.usersNode.remove();\r\n                }\r\n            }\r\n        },\r\n        closeDropdowns() {\r\n            self.notes.forEach(marker => {\r\n                marker.dropDown.close();\r\n            });\r\n            self.shadowMarker.dropDown.close();\r\n        },\r\n        chooseUser(e) {\r\n            const user = e.target;\r\n            const input = self.inputTarget;\r\n            const rejex = new RegExp(`${self.currenMatch[0]}$`, 'g');\r\n            const swapText = self.textToCaret.replace(rejex, ` @${user.dataset.userName} `);\r\n            input.value = input.value.replace(self.textToCaret, swapText);\r\n            input.focus();\r\n            input.setSelectionRange(input.value.length + 1, input.value.length + 1);\r\n            self.usersNode.remove();\r\n        },\r\n        setPositions() {\r\n            self.notes.forEach((item) => {\r\n                item.setPosition();\r\n                item.dropDown.setPosition();\r\n            });\r\n            self.shadowMarker.setPosition();\r\n            self.shadowMarker.dropDown.setPosition();\r\n        },\r\n        maybeSetTimeout(e) {\r\n            if (self.timeout) {\r\n                clearTimeout(self.timeout);\r\n            }\r\n            self.timeout = setTimeout(() => {\r\n                self.setPositions();\r\n                self.timeout = 0;\r\n            }, 100);\r\n        },\r\n        ajax(data) {\r\n            data.append('action', 'divi_design_notes_ajax')\r\n            data.append('diviDesignNotesNonce', self.data.nonce)\r\n            return fetch(self.data.ajaxurl, {\r\n                method: 'POST',\r\n                body: data\r\n            })\r\n        },\r\n        setMarkers() {\r\n            const selectedMarkers = select('[id^=notemarker]', self.templatesContainer, true);\r\n            selectedMarkers.forEach(node => {\r\n                self.notes.push(Marker(node).init());\r\n                return;\r\n            });\r\n        },\r\n        delete($marker) {\r\n            $marker.dropDown.element.remove();\r\n            $marker.element.remove();\r\n            self.notes.splice(self.notes.indexOf($marker), 1);\r\n        },\r\n        usersListItems(list) {\r\n            return html = list.map(user => {\r\n                return `<li data-user-name=\"${user.display_name}\">${user.display_name}<span>${user.user_email}</span></li>`;\r\n            }).join('');\r\n        },\r\n        init() {\r\n            if (self.markerActive) {\r\n                self.stopMarker()\r\n            }\r\n            if (self.menu) {\r\n                if (self.notes.length) {\r\n                    self.setPositions();\r\n                }\r\n                return;\r\n            }\r\n            if (!self.pageContainer) {\r\n                console.warn('No #page-container element on the page!')\r\n                return;\r\n            }\r\n            if (!self.messageElement) {\r\n                self.messageElement = document.createElement('div');\r\n                self.messageElement.id = 'divi_design_notes_message';\r\n            }\r\n            //Menu\r\n            self.menu = Menu(self.pageContainer);\r\n            self.menu.init();\r\n            //Users related\r\n            self.usersNode.id = 'design_notes_user_list';\r\n            self.usersNode.innerHTML = self.usersListItems(self.data.users)\r\n            // self.data.users.forEach(item =>{\r\n            //     const li = document.createElement('li');\r\n            //     li.dataset.userId = item.id;\r\n            //     li.dataset.userName = item.display_name;\r\n            //     li.textContent = item.display_name;\r\n            //     self.usersNode.appendChild(li);\r\n            // });\r\n            //Set Markers\r\n            const selectedMarkers = select('[id^=notemarker]', self.templatesContainer, true);\r\n            selectedMarkers.forEach(node => {\r\n                self.notes.push(Marker(node).init());\r\n                return;\r\n            });\r\n            //ShadowMarker\r\n            const elem = select('#shadowmarker', self.templatesContainer);\r\n            self.shadowMarker = shadowMarker(elem).init();\r\n\r\n            on('click', self.chooseUser, self.usersNode);\r\n            //on('click', self.buttonClicked, self.button);\r\n            on('scroll', self.maybeSetTimeout);\r\n            on('resize', self.maybeSetTimeout, window);\r\n            on('input', self.inputHandler);\r\n            on('transitionend', self.maybeSetTimeout, self.pageContainer);\r\n\r\n        },\r\n\r\n    };\r\n\r\n\r\n    return self;\r\n}","import DesignNotesMain from './designNotesMain.js'\r\nimport DesignNote from './designNote.js'\r\nimport Marker from './marker'\r\nimport {on, select} from './helpers.js'\r\n(function(){\r\nwindow.addEventListener('load', function(){\r\n\r\n\r\n    const button = select('#wp-admin-bar-design_notes');\r\n    if(button){\r\n        on('click', function(){\r\n            document.body.classList.toggle('show_design_notes');\r\n            window[Symbol.for('diviDesignNotesAPI')].init();\r\n        },button)\r\n    }\r\n    window[Symbol.for('diviDesignNotesAPI')] = DesignNotesMain();\r\n})\r\n})()"],"names":["$9da41f4cb74fe07e$export$af631764ddc44097","event","callback","element","document","addEventListener","$9da41f4cb74fe07e$export$8c8705df4a2dcec9","removeEventListener","$9da41f4cb74fe07e$export$2e6c959c16ff56b8","selector","all","querySelectorAll","querySelector","$9da41f4cb74fe07e$export$d544df0d2baa9f2c","parent","position","property","insertAdjacentHTML","$9da41f4cb74fe07e$export$a8ecead220dd38a6","text","console","log","messageElement","window","Symbol","for","innerHTML","message","body","appendChild","animate","opacity","transform","offset","duration","easing","fill","onfinish","remove","$c5e9ed3635a9e4c8$export$2e2bcd8739ae039","marker","self","active","textArea","is_ajaxing","mensions","openClose","close","open","closeDropdowns","classList","add","setPosition","checkMensions","string","stringMensions","data","users","forEach","user","includes","display_name","replace","indexOf","user_email","push","rects","getBoundingClientRect","fromLeft","x","fromRight","innerWidth","right","fromBottom","innerHeight","bottom","translate","style","top","left","maxHeight","clicked","e","target","dataset","action","ajaxing","delete","post","restore","resolve","FormData","append","id","ajax","then","res","ok","json","catch","err","value","trim","content","length","join","post_id","href","title","obj","success","html","trashed","flag","init","$b1fd6c0a5aaba866$export$2e2bcd8739ae039","split","JSON","parse","params","relatedElement","relativeToElement","dropDown","y","getRelativity","getComputedStyle","setRelPosition","offsetHeight","offsetWidth","setFixPosition","el","pos","$6352ba5d4a36b227$export$2e2bcd8739ae039","clear","reset","create","getElSelector","createNote","$f9eeee45ab1941f0$export$2e2bcd8739ae039","Array","from","pinOnPage","activate","$d1520a3df2ffa73d$export$2e2bcd8739ae039","pageContainer","moveButton","toggleButton","visibleNotesByStatus","resolved_notes","active_notes","move","clientX","clientY","stopMove","type","toggle","buttonClicked","input","checked","cacheNotesVisability","localStorage","setItem","stringify","checkNotesVisability","cachedVisibleNotesByStatus","getItem","initiateVisibleNotes","addButton","$c5d2c78fe0887249$export$2e2bcd8739ae039","button","dataElement","templatesContainer","textContent","notes","menu","hoveredElement","markerActive","shadowMarker","timeout","currenMatch","inputTarget","caret","usersNode","createElement","preventDefault","stopMarker","startMarker","followMarker","markerClicked","outline","module","matches","closest","html1","newNote","inputHandler","textToCaret","substring","selectionStart","match","parentElement","groups","usersMatched","filter","toLowerCase","usersListItems","chooseUser","rejex","RegExp","swapText","userName","focus","setSelectionRange","setPositions","item","maybeSetTimeout","clearTimeout","setTimeout","nonce","fetch","ajaxurl","method","setMarkers","node","$marker","splice","list","map","warn","elem"],"version":3,"file":"main.js.map"}